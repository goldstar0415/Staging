<div class="popup-width hidden-xs">
  <div class="col-xs-4 nav-popup hidden-xs">
    <div class="img-event">
      <stars item="data.spot" class="star-event"></stars>
         <span class="wrap-img" style="background-image:url({{data.spot.cover_url.medium}})">
            <div class="arrow">
            </div>
         </span>
      <div class="star-event">
        <!--<img src="/assets/img/icons/star.png"><img src="/assets/img/icons/star.png">-->
        <!--<img src="/assets/img/icons/star.png"><img src="/assets/img/icons/star.png">-->
        <!--<img src="/assets/img/icons/star.png">-->
      </div>
    </div>
  </div>
  <div class="col-xs-8 popup-main">
    <div class="popup-header">
      <a class="title" ui-sref="spot({spot_id: data.spot.id, user_id: data.spot.user_id})">{{data.spot.title}}</a>
      <p class="star-event-mobile">
        <stars item="data.spot"></stars>
      </p>
      <p class="location-event">{{data.address}}</p>
      <p class="date-event" ng-if="data.spot.category.type.name == 'event'">
        <span>{{data.spot.start_date | toTimezone : 'DD MMM YYYY'}}</span> - <span>{{data.spot.end_date | toTimezone : 'DD MMM YYYY'}}</span>
      </p>
      <a class="author-event" ui-sref="profile.main({user_id: data.spot.user.alias || data.spot.user_id})" ng-if="data.spot.user">{{'by ' +
        data.spot.user.first_name + '
        ' + data.spot.user.last_name}}</a>
    </div>
    <div class="popup-links">
      <ul class="list-inline">
        <li><a ng-click="view = 'about'" class="menu-about">About</a>
        </li>
        <li><a ng-click="view = 'reviews'" class="menu-reviews">Reviews</a>
        </li>
        <li><a ng-click="view = 'photos'" class="menu-photos">Photos</a>
        </li>
      </ul>
    </div>
    <div class="content-popup clearfix">
      <p ng-show="view == 'about'" class="description">{{data.spot.description}}</p>
      <div ng-show="view == 'reviews'" class=" col-xs-12 reviews-popup">
        <div ng-if="data.spot.comments.length > 0">
          <div class="col-xs-12 previous-next" ng-if="data.spot.comments.length > 1">
            <a ng-click="prevReview()" class="previous"></a> <a ng-click="nextReview()" class="next "></a>
          </div>
          <div class="col-xs-3 avatar">
            <img ng-src="{{currentReview.sender.avatar_url.thumb}}">
          </div>
          <div class="col-xs-9 content">
                  <span><a class="reviews-user">{{currentReview.sender.first_name + ' ' +
                    currentReview.sender.last_name}}</a></span>
            <p class="date-reviews ">{{currentReview.created_at | toTimezone: 'DD MMM YYYY [at] hh:mm a'}}</p>
            <p class="description line-break" ng-bind-html="currentReview.body | linky:'_blank'"></p>

          </div>
        </div>
        <div ng-if="!data.spot.comments.length" class="photos-event clearfix">
          <span>There are no reviews yet</span>
        </div>
      </div>
      <div ng-show="view == 'photos'" class=" col-xs-12 photo-popup">
        <div  class="col-xs-12 previous-next">
          <a ng-click="prevPhoto()" class="previous"></a>
          <a ng-click="nextPhoto()" class="next"></a>
        </div>
        <div ng-if="showPhotos" class="photos-event clearfix">
          <a photo-viewer items="data.spot.photos" index="firstPhotoIndex" current-item="firstItem">
            <img ng-src="{{firstPhoto}}">
          </a>
          <a ng-if="secondItem" photo-viewer items="data.spot.photos" index="secondPhotoIndex"
             current-item="secondItem">
            <img ng-src="{{secondPhoto}}">
          </a>
          <!--<a ><img src="/assets/img/icons/q.png">-->
          <!--</a>-->
          <!--<a ><img src="/assets/img/icons/q.png">-->
          <!--</a>-->
        </div>
        <div ng-if="!showPhotos" class="photos-event clearfix">
          <span>There are no photos yet</span>
        </div>
      </div>
    </div>
    <div class="links-nav">
      <ul class="tools col-xs-offset-3 clearfix">
        <li ng-if="!data.spot.is_saved">
          <a class="save-event" ng-click="saveToCalendar(data.spot)">Save</a>
        </li>
        <li ng-if="$root.currentUser && data.spot.is_saved">
          <a class="save-event saved clicked" ng-click="removeFromCalendar(data.spot)">Remove</a>
        </li>
        <li ng-if="$root.currentUser.id != data.spot.user_id && !data.spot.is_favorite">
          <a class="favorite-spot" ng-click="addToFavorite(data.spot)">Favorite</a>
        </li>
        <li ng-if="$root.currentUser && $root.currentUser.id != data.spot.user_id && data.spot.is_favorite">
          <a class="fav favorited" ng-click="removeFromFavorite(data.spot)">Unfavorite</a>
        </li>
        <li>
          <invite-friends item="data.spot"></invite-friends>
        </li>
        <li>
          <a class="share-btn" ng-click="">Share</a>
        </li>
        <li>
          <a class="download" ng-click="">Export to ICS</a>
        </li>
      </ul>
      <!--<share item="data.spot" type="spot" class="hidden"></share>-->
    </div>
    <div class="close-event" ng-if="$root.currentUser && !data.spot.isReported">
      <a ng-click="visible_submenu = !visible_submenu"  class="close">. . .</a>
      <div ng-show="visible_submenu" class="more-info-popup">
        <ul class="list-unstyled">
          <li>
            <a report-spot="data.spot">Report</a>
          </li>
        </ul>
      </div>
    </div>
  </div>
  <div class="leaflet-popup-tip-container">
    <div class="leaflet-popup-tip"></div>
  </div>
</div>






<!-- mobile view -->
<div class="popup-width mobile-popup visible-xs">
  <div class="mobile-popup-header">
    <div class="mobile-popup-close text-center">
      <span class="popup-close"></span>
    </div>
    <div class="mobile-popup-nav">
      <div class="popup-links">
        <ul class="list-inline">
          <li><a ng-click="view = 'about'" class="menu-about">About</a>
          </li>
          <li><a ng-click="view = 'reviews'" class="menu-reviews">Reviews</a>
          </li>
          <li><a ng-click="view = 'photos'" class="menu-photos">Photos</a>
          </li>
        </ul>
      </div>
    </div>
  </div>
  <div class="mobile-popup-content">
    <div class="row">
      <div class="col-xs-3 mobile-popup-img spot-thumb">
        <figure>
          <img ng-src="{{data.spot.cover_url.medium}}" alt="Test spot" class="img-size" src="{{data.spot.cover_url.medium}}">
          <spot-type type="data.spot.type"></spot-type>
        </figure>
        <stars item="data.spot" class="star-event"></stars>
      </div>
      <div class="col-xs-9 mobile-popup-content">
        <div class="popup-header">
          <a class="title" ui-sref="spot({spot_id: data.spot.id, user_id: data.spot.user_id})">{{data.spot.title}}</a>
          <p class="location-event">{{data.address}}</p>
          <p class="date-event" ng-if="data.spot.category.type.name == 'event'">
            <span>{{data.spot.start_date | toTimezone : 'DD MMM YYYY'}}</span> - <span>{{data.spot.end_date | toTimezone : 'DD MMM YYYY'}}</span>
          </p>
          <a class="author-event text-left" ui-sref="profile.main({user_id: data.spot.user.alias || data.spot.user_id})" ng-if="data.spot.user">{{'by ' +
            data.spot.user.first_name + '
            ' + data.spot.user.last_name}}</a>
        </div>
        <div class="close-event">
          <a ng-click="marker.closePopup()" class="close">. . .</a>
        </div>
      </div>
    </div>
    <div class="row">
      <div class="content-popup clearfix">
        <div ng-show="view == 'about'" class="description col-xs-offset-3 col-xs-9">{{data.spot.description}}</div>
        <div ng-show="view == 'reviews'" class=" col-xs-12 reviews-popup">
          <div ng-if="data.spot.comments.length > 0">
            <div class="col-xs-12 previous-next" ng-if="data.spot.comments.length > 1">
              <a ng-click="prevReview()" class="previous"></a> <a ng-click="nextReview()" class="next "></a>
            </div>
            <div class="col-xs-3 avatar">
              <img ng-src="{{currentReview.sender.avatar_url.thumb}}">
            </div>
            <div class="col-xs-9 content">
                     <span><a class="reviews-user">{{currentReview.sender.first_name + ' ' +
                       currentReview.sender.last_name}}</a></span>
              <p class="description line-break" ng-bind-html="currentReview.body | linky:'_blank'"></p>
              <p class="date-reviews ">{{currentReview.created_at | toTimezone: 'DD MMM YYYY [at] hh:mm a'}}</p>
            </div>
          </div>
          <div ng-if="!data.spot.comments.length" class="photos-event clearfix">
            <span>There are no reviews yet</span>
          </div>
        </div>
        <div ng-show="view == 'photos'" class=" col-xs-12 photo-popup">
          <div  class="col-xs-12 previous-next">
            <a ng-click="prevPhoto()" class="previous"></a>
            <a ng-click="nextPhoto()" class="next"></a>
          </div>
          <div ng-if="showPhotos" class="photos-event clearfix row">
            <a photo-viewer items="data.spot.photos" index="firstPhotoIndex" current-item="firstItem" class="col-xs-3">
              <img ng-src="{{firstPhoto}}">
            </a>
            <a ng-if="secondItem" photo-viewer items="data.spot.photos" index="secondPhotoIndex"
               current-item="secondItem" class="col-xs-3">
              <img ng-src="{{secondPhoto}}">
            </a>
            <!--<a ><img src="/assets/img/icons/q.png">-->
            <!--</a>-->
            <!--<a ><img src="/assets/img/icons/q.png">-->
            <!--</a>-->
          </div>
          <div ng-if="!showPhotos" class="photos-event clearfix">
            <span>There are no photos yet</span>
          </div>
        </div>


        <div class="links-nav">
          <ul class="tools clearfix">
            <li ng-if="!data.spot.is_saved">
              <a class="save-event" ng-click="saveToCalendar(data.spot)">Save</a>
            </li>
            <li ng-if="$root.currentUser && data.spot.is_saved">
              <a class="save-event saved clicked" ng-click="removeFromCalendar(data.spot)">Remove</a>
            </li>
            <li ng-if="!data.spot.is_favorite">
              <a class="favorite-spot" ng-click="addToFavorite(data.spot)">Favorite</a>
            </li>
            <li ng-if="$root.currentUser && data.spot.is_favorite">
              <a class="fav favorited" ng-click="removeFromFavorite(data.spot)">Unfavorite</a>
            </li>
            <li>
              <invite-friends item="data.spot"></invite-friends>
            </li>
            <li>
              <a class="share-btn" ng-click="">Share</a>
            </li>
            <li>
              <a class="download" ng-click="">Export to ICS</a>
            </li>
          </ul>
          <!--<share item="data.spot" type="spot" class="hidden"></share>-->
        </div>
        <div class="clearfix"></div>
      </div>
    </div>
  </div>
</div>
