<script type="text/ng-template" id="photoViewer.html">
  <div class="viewer-content">
    <div class="photo-viewer">
      <div class="image"
           ng-class="{'col-xs-8': !PV.hideComments && $root.currentUser, 'col-xs-12': PV.hideComments || !$root.currentUser}">
        <button type="button" class="close hidden-lg visible-sm hidden-md visible-xs" ng-click="PV.close()"
                aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
        <img ng-src="{{PV.currentPhoto.photo_url.original}}">

        <a ng-click="PV.previousPhoto($event)" ng-if="PV.countPhotos > 1" class="previous"></a>
        <a ng-click="PV.nextPhoto($event)" ng-if="PV.countPhotos > 1" class="next"></a>
      </div>
      <div class="photo-comments col-xs-4" ng-if="!PV.hideComments && $root.currentUser">
        <button type="button" class="close hidden-sm hidden-xs" data-dismiss="alert" aria-label="Close" ng-click="PV.close()">
          <span aria-hidden="true">&times;</span>
        </button>
        <p class="location">{{PV.currentPhoto.address}}</p>

        <form name="form" ng-submit="PV.sendComment(form)" class="col-xs-12 new-post">
          <textarea ng-model="PV.comment" name="comment" placeholder="Start typing..." required></textarea>

          <input type="submit" value="Send">
        </form>
        <div class="col-xs-12 reviews">
          <div class="post" ng-repeat="comment in PV.comments">
            <div class="avatar-wrap">
              <img class="avatar" ng-src="{{comment.sender.avatar_url.thumb}}">
            </div>
            <div class="info">
              <h3 class="name">{{comment.sender.first_name}} {{comment.sender.last_name}}</h3>

              <p ng-bind-html="comment.body | htmlLinky:'_blank'"></p>

              <p class="time">{{comment.created_at}}</p>
            </div>
            <a class="delete-reviews" ng-if="$root.profileUser.id == $root.currentUser.id ||  $root.currentUser.id == comment.sender.id"
               ng-click="PV.deleteComment(comment.id, $index)"></a>
          </div>
        </div>
      </div>
    </div>
  </div>
</script>
