<div ng-include="'/app/components/user_tab_menu/user_tab_menu.html'"></div>

<div infinite-scroll="Comment.pagination.nextPage()" infinite-scroll-disabled="Comment.pagination.busy"
     class="clearfix" infinite-scroll-distance="1">
  <div ng-repeat="item in Comment.comments.data">

    <div ng-switch="item.commentable_type">
      <div ng-switch-when="App\Plan">
          <div class="wall-item wall-item-messages">
              <div class="wall-user">
                  <a ui-sref="planner.view({user_id: item.commentable.user_id, plan_id: item.commentable.id})" class="wall-avatar">
                      <img src="assets/img/missing_thumb.png">
                  </a>
                  <div class="wall-user-info">
                      <a ui-sref="planner.view({user_id: item.commentable.user_id, plan_id: item.commentable.id})">
                          <span>{{item.commentable.title}}</span>
                      </a>
                      <p>{{item.created_at | toTimezone}}</p>
                  </div>
              </div>
              <div class="wall-content">
                  <div class="wall-message">
                      <p ng-bind-html="item.body | linky:'_blank'" class="color-link"></p>
                      <attachments items="item.attachments"></attachments>
                  </div>
              </div>
          </div>
        <!-- <a class="review-img" ui-sref="planner.view({user_id: item.commentable.user_id, plan_id: item.commentable.id})">
          <img class="media-object fav-avatar-icon feeds-img" src="assets/img/missing_thumb.png">
        </a>

        <div class="text-block">
          <h2 class="media-heading feeds-title">
            <a ui-sref="planner.view({user_id: item.commentable.user_id, plan_id: item.commentable.id})"
              >{{item.commentable.title}}
            </a>
          </h2>
          <a class="author-name" ui-sref="profile.main({user_id: item.sender.alias || item.sender.id})">
            {{item.sender.first_name}}
            {{item.sender.last_name}}
          </a>
          <p class="time">{{item.created_at | toTimezone}}</p>

          <p class="description" ng-bind-html="item.body | linky:'_blank'"></p>
          <attachments items="item.attachments"></attachments>


        </div> -->
      </div>

      <div ng-switch-when="App\Spot">

          <div class="wall-item wall-item-messages">
              <div class="wall-user">
                  <a ui-sref="spot({user_id: item.commentable.user_id || 0, spot_id: item.commentable.id})" class="wall-avatar">
                      <img ng-src="{{item.commentable.cover_url.medium}}">
                  </a>
                  <div class="wall-user-info">
                      <a ui-sref="spot({user_id: item.commentable.user_id || 0, spot_id: item.commentable.id})">
                          <span>{{item.commentable.title}}</span>
                      </a>
                      <p>{{item.created_at | toTimezone}}</p>
                  </div>
              </div>
              <div class="wall-content">
                  <div class="wall-message">
                      <p ng-bind-html="item.body | linky:'_blank'" class="color-link"></p>
                      <attachments items="item.attachments"></attachments>
                  </div>
              </div>
          </div>

        <!-- <a class="review-img" ui-sref="spot({user_id: item.commentable.user_id || 0, spot_id: item.commentable.id})">
          <img class="media-object fav-avatar-icon feeds-img" ng-src="{{item.commentable.cover_url.medium}}">
        </a>

        <div class="text-block">
          <h2 class="media-heading feeds-title">
            <a ui-sref="spot({user_id: item.commentable.user_id || 0, spot_id: item.commentable.id})"
              >{{item.commentable.title}}</a>
          </h2>
          <a class="author-name" ui-sref="profile.main({user_id: item.sender.alias || item.sender.id})">
            {{item.sender.first_name}} {{item.sender.last_name}}
          </a>

          <p class="time">{{item.created_at | toTimezone}}</p>
          <p class="description" ng-bind-html="item.body | linky:'_blank'"></p>
          <attachments items="item.attachments"></attachments>

        </div> -->
      </div>

      <div ng-switch-when="App\AlbumPhoto">

          <div class="wall-item wall-item-messages">
              <div class="wall-user">
                  <a photo-viewer items="[item.commentable]" index="0" class="wall-avatar">
                      <img ng-src="{{item.commentable.photo_url.medium}}">
                  </a>
                  <div class="wall-user-info">
                      <a ui-sref="spot({user_id: item.commentable.user_id || 0, spot_id: item.commentable.id})">
                          <span>{{item.commentable.title}}</span>
                      </a>
                      <p>{{item.created_at | toTimezone}}</p>
                  </div>
              </div>
              <div class="wall-content">
                  <div class="wall-message">
                      <p ng-bind-html="item.body | linky:'_blank'" class="color-link"></p>
                      <attachments items="item.attachments"></attachments>
                  </div>
              </div>
          </div>

        <!-- <a class="review-img" photo-viewer items="[item.commentable]" index="0">
          <img class="media-object fav-avatar-icon feeds-img" ng-src="{{item.commentable.photo_url.medium}}">
        </a>

        <div class="text-block">

          <a class="author-name" ui-sref="profile.main({user_id: item.sender.alias || item.sender.id})">{{item.sender.first_name}}
            {{item.sender.last_name}}</a>

          <p class="time">{{item.created_at | toTimezone}}</p>

          <p class="description" ng-bind-html="item.body | linky:'_blank'"></p>


        </div> -->
      </div>

      <div ng-switch-when="App\SpotPhoto">

          <div class="wall-item wall-item-messages">
              <div class="wall-user">
                  <a photo-viewer items="[item.commentable]" index="0" class="wall-avatar">
                      <img ng-src="{{item.commentable.photo_url.medium}}">
                  </a>
                  <div class="wall-user-info">
                      <a ui-sref="spot({user_id: item.commentable.user_id || 0, spot_id: item.commentable.id})">
                          <span>{{item.commentable.title}}</span>
                      </a>
                      <p>{{item.created_at | toTimezone}}</p>
                  </div>
              </div>
              <div class="wall-content">
                  <div class="wall-message">
                      <p ng-bind-html="item.body | linky:'_blank'" class="color-link"></p>
                      <attachments items="item.attachments"></attachments>
                  </div>
              </div>
          </div>

        <!-- <a class="review-img" photo-viewer items="[item.commentable]" index="0">
          <img class="media-object fav-avatar-icon feeds-img" ng-src="{{item.commentable.photo_url.medium}}">
        </a>

        <div class="text-block">

          <a class="author-name" ui-sref="profile.main({user_id: item.sender.alias || item.sender.id})">{{item.sender.first_name}}
            {{item.sender.last_name}}</a>

          <p class="time">{{item.created_at | toTimezone}}</p>

          <p class="description" ng-bind-html="item.body | linky:'_blank'"></p>


        </div> -->
      </div>
    </div>
  </div>

  <div class="col-xs-12">
    <preloader ng-show="Comment.pagination.busy"></preloader>
  </div>
</div>

<div class="col-xs-12">
  <h4 class="text-center description" ng-if="Comment.comments.data.length == 0 && !Comment.pagination.busy">No comments
    yet.</h4>
</div>
