<form name="form" class="form-horizontal" ng-submit="SpotCreate.create(form)" role="form" novalidate>
  <h2 class="event-title">Create new Spot</h2>
  <section class="event-main-info">
    <div class="form-group">
      <label class="col-sm-2 control-label">Type</label>

      <div class="col-sm-10">
        <div class="btn-group buttons-set-new-event">
          <button ng-click="SpotCreate.type = 'Event'"
                  type="button"
                  class="btn btn-default btn-event"
                  ng-class="SpotCreate.type == 'Event' ? 'active-point' : ''">Event
          </button>

          <button ng-click="SpotCreate.type = 'Recreation'"
                  type="button"
                  class="btn btn-default btn-event"
                  ng-class="SpotCreate.type == 'Recreation' ? 'active-point' : ''">Recreation
          </button>
          <button ng-click="SpotCreate.type = 'PitStop'"
                  type="button"
                  class="btn btn-default btn-event"
                  ng-class="SpotCreate.type == 'PitStop' ? 'active-point' : ''">PitStop
          </button>
        </div>
      </div>
    </div>
    <div class="form-group">
      <label class="col-sm-2 control-label">Title</label>

      <div class="col-sm-10">
        <input type="text" name="title" ng-model="SpotCreate.title" class="form-control" placeholder="Start typing..."
               ng-minlength="3" ng-maxlength="255" required>

        <div ng-messages="form.title.$error" ng-if="form.$submitted || form.title.$touched"
             class="error-message-inline">
          <div ng-message="required">Title is required</div>
          <div ng-message="minlength">Title too short</div>
          <div ng-message="maxlength">Title can't be longer then 255 symbols</div>
        </div>

      </div>
    </div>

    <div class="form-group">
      <label class="col-sm-2 control-label">Description</label>

      <div class="col-sm-10">
        <textarea class="form-control" name="description" ng-maxlength="5000" ng-model="SpotCreate.description"
                  rows="5"></textarea>

        <div ng-messages="form.description.$error" ng-if="form.$submitted || form.description.$touched"
             class="error-message-inline">
          <div ng-message="maxlength">Description can't be longer then 5000 symbols</div>
        </div>
      </div>
    </div>
    <div class="form-group">
      <div ng-if="SpotCreate.links.length < SpotCreate.restrictions.links" class="col-sm-12 no-pad">
        <label class="col-sm-2 control-label">Website</label>

        <div class="col-sm-10">
          <div class="input-group ">
            <input validate-link ng-model="SpotCreate.newLink" name="newLink" type="text" class="form-control"
                   placeholder="http://zoomtivity.com">
          <span class="input-group-btn">
                 <button ng-click="SpotCreate.addLink(!form.newLink.$error.link)" class="btn btn-default" type="button">
                   <i class="glyphicon glyphicon-plus"></i></button>
          </span>
          </div>

          <div ng-messages="form.newLink.$error" class="error-message-inline">
            <div ng-message="link">Wrong link</div>
          </div>
        </div>
      </div>

      <div class="col-sm-12 no-pad" ng-repeat="item in SpotCreate.links track by $index">
        <label class="col-sm-2 control-label"></label>

        <div class="col-sm-10">
          <div class="input-group">
            <input validate-link ng-model="item" name="link_{{$index}}" type="text" class="form-control"
                   placeholder="http://zoomtivity.com">
          <span class="input-group-btn">
                 <button ng-click="SpotCreate.removeLink($index)" class="btn btn-default" type="button"><i
                   class="glyphicon glyphicon-minus"></i></button>
          </span>
          </div>

          <div ng-messages="form['link_' + $index].$error" class="error-message-inline">
            <div ng-message="link">Wrong link</div>
          </div>
        </div>
      </div>


      <!-- /input-group -->
    </div>

    </div>
    <div class="form-group">
      <label class="col-sm-2 control-label">Category</label>

      <div class="col-sm-10">
        <!-- CATEGORY SELECT here-->
      </div>
    </div>

    <div class="form-group">
      <label class="col-sm-2 control-label">Tags </label>

      <div class="col-sm-10">
        <tags-input class="tags-input-custom"
                    ng-model="SpotCreate.tags"
                    on-tag-adding="SpotCreate.onTagsAdd()">
        </tags-input>
      </div>
    </div>
  </section>
  <section class="event-additionl-info">

    <div class="form-group">
      <div>
        <label class="col-sm-2 control-label">Location</label>

        <div class="col-sm-10 col-xs-12">
          <div class="input-group " ng-if="SpotCreate.locations.length < SpotCreate.restrictions.locations">
            <location address="SpotCreate.newLocation.address" location="SpotCreate.newLocation.location"
                      limit="15"></location>
          <span class="input-group-btn">
            <button ng-click="SpotCreate.addLocation(SpotCreate.newLocation);" class="btn btn-default" type="button"><i
              class="glyphicon glyphicon-plus"></i></button>
          </span>
          </div>
          <!-- /input-group -->
          <div ng-if="!item.isDelete" class="input-group" ng-repeat="item in SpotCreate.locations track by $index">
            <location address="item.address" location="item.location" limit="15" marker="item.marker"
                      on-empty="SpotCreate.removeLocation($index)" bind-marker="true"></location>
            <span class="input-group-btn">
              <button ng-click="SpotCreate.removeLocation($index);" class="btn btn-default" type="button"><i
                class="glyphicon glyphicon-minus"></i></button>
            </span>
          </div>
        </div>
      </div>
    </div>

    <div class="form-group" ng-if="SpotCreate.type === 'Event'">
      <label class="col-sm-2 control-label">Date</label>

      <div class="col-sm-10">
        <div class="col-sm-4 col-xs-12 no-pad">
          <input ng-datepicker name="start_date" ng-model="SpotCreate.start_date" start-date="SpotCreate.startDate"
                 type="text" required>

          <div ng-messages="form.start_date.$error" ng-if="form.$submitted" class="error-message-inline">
            <div ng-message="required">Start date field can't be empty</div>
          </div>
        </div>
        <span class="hidden-xs col-sm-1">—</span>

        <div class="col-sm-4 col-xs-12 no-pad">
          <input ng-datepicker name="end_date" ng-model="SpotCreate.end_date" start-date="SpotCreate.start_date"
                 type="text" required>

          <div ng-messages="form.end_date.$error" ng-if="form.$submitted" class="error-message-inline">
            <div ng-message="required">End date field can't be empty</div>
          </div>
        </div>
      </div>

    </div>

    <div class="form-group" ng-if="SpotCreate.type === 'Event'">
      <label class="col-sm-2 control-label">Time</label>

      <div class="col-sm-10">
        <div class="col-sm-4 col-xs-12 no-pad">
          <input ng-timepicker step="30" placeholder="12:00..." ng-model="SpotCreate.start_time" name="start_time"
                 type="text" required>

          <div ng-messages="form.start_time.$error" ng-if="form.$submitted" class="error-message-inline">
            <div ng-message="required">Start time field can't be empty</div>
          </div>
        </div>
        <span class="hidden-xs col-sm-1">—</span>

        <div class="col-sm-4 col-xs-12 no-pad">
          <input ng-timepicker step="30" placeholder="12:00..." ng-model="SpotCreate.end_time" name="end_time"
                 type="text" required>

          <div ng-messages="form.end_time.$error" ng-if="form.$submitted" class="error-message-inline">
            <div ng-message="required">End time field can't be empty</div>
          </div>
        </div>
      </div>
    </div>
  </section>
  <section class="event-upload-photos">
    <div class="form-group">
      <h3>Add photos </h3>

      <!--<label class="col-sm-12" style="font-size: 30px; text-align: center;">Добавить D & D</label>-->
      <div class="col-sm-12">
        <uploader drop-zone="true"></uploader>
      </div>

      <div class="col-xs-12">
        <ul class="photos row">
          <li ng-repeat="item in SpotCreate.images.files track by $index">

            <img ng-click="SpotCreate.cropImage(item)" alt="" ngf-src="item"
                 ng-class="SpotCreate.selectCover ? 'cover-hover' : ''">
            <a ng-if="!SpotCreate.selectCover" class="delete" ng-click="SpotCreate.deleteImage($index)"
               title="Delete"></a>

          </li>
        </ul>
      </div>
      <button type="button" ng-click="SpotCreate.selectCover = true" class="btn btn-default green-btn pull-left"
              ng-if="!SpotCreate.selectCover">Select cover
      </button>
      <button type="button" ng-click="SpotCreate.selectCover = false" class="btn btn-primary blue-btn pull-left"
              ng-if="SpotCreate.selectCover">Cancel
      </button>

      <div class="col-sm-12" ng-if="SpotCreate.cover">
        <br/>
        <label class="col-sm-4 control-label no-pad">Cover preview:</label>
        <ul class="photos row">
          <li>
            <img ng-click="SpotCreate.cropImage(item)" alt="" ng-src="{{SpotCreate.cover}}">
            <a class="delete" ng-click="SpotCreate.cover = null;" title="Delete"></a>
          </li>
        </ul>
      </div>
    </div>
  </section>
  <section class="event-add-video">
    <div class="form-group">
      <label class="col-sm-2 control-label">Video</label>

      <div class="col-sm-10">
        <div class="input-group ">
          <input type="text" class="form-control" name="youtubeLink" youtube-link ng-model="SpotCreate.newYoutubeLink"
                 placeholder="Youtube link here...">
          <span class="input-group-btn">
            <button class="btn btn-default" ng-click="SpotCreate.addYoutubeLink(!form.youtubeLink.$error.link)"
                    type="button"><i class="glyphicon glyphicon-plus"> </i>
            </button>
          </span>
        </div>
        <div ng-messages="form.youtubeLink.$error" class="error-message-inline">
          <div ng-message="link">Wrong link</div>
        </div>
        <!-- /input-group -->

        <div ng-repeat="item in SpotCreate.youtube_links track by $index">
          <div class="input-group ">
            <input type="text" class="form-control" name="youtubeLink_{{$index}}" youtube-link ng-model="item"
                   placeholder="Youtube link here...">
          <span class="input-group-btn">
            <button class="btn btn-default" ng-click="SpotCreate.removeYoutubeLink($index)"
                    type="button"><i class="glyphicon glyphicon-minus"> </i>
            </button>
          </span>
          </div>
          <div ng-messages="form['youtubeLink_' + $index].$error" class="error-message-inline">
            <div ng-message="link">Wrong link</div>
          </div>
        </div>
      </div>
    </div>
  </section>
  <div class="form-group">
    <div class="col-xs-12">
      <button type="submit" class="btn btn-default green-btn pull-left">Create event</button>
    </div>
  </div>
</form>
