<div class="messages">
  <div ng-include="'/app/components/user_tab_menu/user_tab_menu.html'"></div>
  <div ng-repeat="dialog in Chat.dialogs" class="col-xs-12 message"
       ng-class="{new: !dialog.last_message.is_read && dialog.last_message.user_id != currentUser.id}">
    <div class="col-lg-2 col-md-2 col-sm-3 col-xs-2 nopad-media">
      <a ui-sref="profile.main({user_id: dialog.user.alias || dialog.user.id})">
        <img ng-src="{{dialog.user.avatar_url.thumb}}" class="avatar"/>
      </a>
    </div>
    <div class="nopad-media name-data" ng-class="{'col-xs-4 col-md-4 col-sm-3': dialog.last_message.user_id == currentUser.id, 'col-xs-8 col-md-8 col-sm-9' : dialog.last_message.user_id != currentUser.id}">
      <h3 class="name">
        <a ui-sref="chatRoom({user_id: dialog.user.id})">
          {{dialog.user.first_name}} {{dialog.user.last_name}}
        </a>
      </h3>
      <p class="send-message" ng-if="dialog.last_message.message">{{dialog.last_message.message}}</p>
      <p ng-if="!dialog.last_message.message"><b>attached files</b></p>
      <p class="data">{{dialog.last_message.created_at | toTimezone}}</p>
      <a class="delete" ng-click="Chat.deleteDialog(dialog.user.id, $index)">Delete</a>
    </div>
    <div class="content-messages padr0 col-xs-6"
         ui-sref="chatRoom({user_id: dialog.user.id})">
      <div ng-if="dialog.last_message.user_id != currentUser.id">
      </div>
      <div ng-if="dialog.last_message.user_id == currentUser.id" class="col-md-4 col-sm-6 col-md-offset-0 col-xs-4 col-xs-offset-8 nopad-media incoming-avatar">
        <a>
          <img ng-src="{{currentUser.avatar_url.thumb}}">
        </a>
      </div>
      <div ng-if="dialog.last_message.user_id == currentUser.id"
           class="col-xs-12 col-md-8 incoming-messages nopad-media"
           ng-class="{new: !dialog.last_message.is_read}">
        <div class="col-md-12 col-sm-12 col-xs-12 nopad-media">
          <div class="message-in">
            <h3 class="name">
              <a ui-sref="chatRoom({user_id: dialog.user.id})">
                John Doe
              </a>
            </h3>
            <p ng-if="dialog.last_message.message">{{dialog.last_message.message}}</p>
            <p ng-if="!dialog.last_message.message"><b>attached files</b></p>
          </div>
        </div>

      </div>
    </div>
  </div>
  <div class="col-xs-12" ng-if="Chat.dialogs.length == 0">
    <h4 class="text-center description">No messages yet</h4>
  </div>
</div>
